<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Discover Paintings â€“ Firefox Startpage</title>
<style>
  body {
    margin: 0;
    padding: 0;
    font-family: "Segoe UI", sans-serif;
    background: url('bg.jpg') no-repeat center center fixed;
    background-size: cover;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
    min-height: 100vh;
    position: relative;
  }

  .container {
    background: rgba(0, 0, 0, 0.6);
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    max-width: 95vw;
    transition: opacity 0.8s ease-in-out;
  }

  img {
    max-width: 90vw;
    height: auto;
    border: 5px solid white;
    border-radius: 10px;
  }

  h1 { margin-top: 15px; font-size: 1.8em; }
  p { margin: 5px 0 20px; font-size: 1em; color: #ccc; }

  .links {
    position: absolute;
    bottom: 30px;
    display: flex;
    gap: 25px;
  }

  .links a {
    text-decoration: none;
    color: white;
    font-weight: 500;
    padding: 10px 15px;
    border: 1px solid white;
    border-radius: 8px;
    transition: 0.3s;
  }

  .links a:hover { background: white; color: black; }
</style>
</head>
<body>
  <div class="container" id="artContainer" style="opacity:0;">
    <img id="artImage" src="" alt="Painting of the Day">
    <h1 id="artTitle">Loading...</h1>
    <p id="artArtist"></p>
  </div>

  <div class="links">
    <a href="https://www.youtube.com" target="_blank">YouTube</a>
    <a href="https://www.instagram.com" target="_blank">Instagram</a>
    <a href="https://chat.openai.com" target="_blank">ChatGPT</a>
  </div>

<script>
async function loadRandomPainting() {
  const container = document.getElementById("artContainer");
  container.style.opacity = 0;

  const skipKeywords = [
    "portrait", "self-portrait", "man", "woman", "figure", "head", "face", "bust"
  ];

  try {
    // Step 1: Fetch only "Painting" classification
    const randomPage = Math.floor(Math.random() * 500) + 1;
    const response = await fetch(
      `https://api.artic.edu/api/v1/artworks/search?q=painting&query[term][classification_title]=Painting&page=${randomPage}&limit=1&fields=id,title,image_id,artist_title,medium_display`
    );
    const data = await response.json();
    if (!data.data || data.data.length === 0) throw new Error("No paintings found");

    const art = data.data[0];
    const title = (art.title || "").toLowerCase();
    const medium = (art.medium_display || "").toLowerCase();

    // Step 2: Skip portraits / faces
    if (skipKeywords.some(k => title.includes(k) || medium.includes(k))) {
      return loadRandomPainting();
    }

    // Step 3: Generate IIIF image URL (smaller size for speed)
    const imageId = art.image_id;
    if (!imageId) return loadRandomPainting();
    const imageUrl = `https://www.artic.edu/iiif/2/${imageId}/full/600,/0/default.jpg`;

    // Step 4: Display
    const img = document.getElementById("artImage");
    img.onload = () => container.style.opacity = 1;
    img.src = imageUrl;

    document.getElementById("artTitle").textContent = art.title || "Untitled";
    document.getElementById("artArtist").textContent = art.artist_title
      ? `By ${art.artist_title}`
      : "Unknown Artist";

  } catch (error) {
    console.error("Error fetching painting:", error);
    document.getElementById("artTitle").textContent = "Error loading painting";
    document.getElementById("artArtist").textContent = "";
  }
}

loadRandomPainting();
</script>
</body>
</html>
